applications:
  - empty-app:
      instances: 1
      input_values:
        - PORT: 90
        - MANDATORY_INPUT: 34
        - MANDATORY_INPUT2: 34


  
  # - empty-app:
  #     instances: 1
  
  # - empty-app
  - mysql:
      input_values:
        - AAAA: a

  - rails-website:
      input_values:
        - DB_USER: $colony.applications.empty-app.outputs.output2
        - DB_NAME: $INPUT2
        - DB_PASS: $colony.services.service1.outputs.pass
        - AA: a
      depends_on:
        - service1
        - service2


services:
  - service1
  - service2:
      input_values:
        - AAA: $INPUT4
  # - empty-app


  
#   - empty-app:
#       input_values:
#         - DB_NAME: 123


  # - service1:
  #     input_values:
  #       - MANAGED_IDENTITY: ${colony.environment.id}/${INPUT1}
  #       - DB_NAME: c
  #       - DB_USER: d
  #       - DB_PASS: d
  #       - SANDBOX_ID: $colony.environment.id
  #     depends_on:
  #       - empty-app

artifacts:
  - empty-app: $INPUT2
  - java-spring-website
  - aaaaa: sdfsdfsdf
  - aaaaa: $INPUT3
  - aaaaa
  

inputs:
  - INPUT1
  - INPUT2
  - INPUT2
  - INPUT3
  - INPUT4

clouds:
- Azure: uswest2
# debugging:
  # bastion_availability: enabled-on

# ingress:
#   listeners:
#     - https: 333
#       certificate: https://my_vault.vault.azure.net/secrets/my_cert/915c739593b14c0497178ea2ab423647
#     - http: 3243
#       redirect_to_listener: 333
#     - https: 555
#       certificate: https://my_vault.vault.azure.net/secrets/my_cert/915c739593b14c0497178ea2ab423647
#       rules:
#         - application: empty-app
#           host: aaa
#         - port: 33
#           default: true
#           application: empty-app        

kind: blueprint
metadata:
  description: 'empty vm'

spec_version: 1
